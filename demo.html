<!DOCTYPE html>
<html lang="en" data-theme="system" data-resolved-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EarthWedge Demo</title>
    <style>
      * {
        box-sizing: border-box;
      }
      :root {
        --body-bg: #ffffff;
        --text-primary: #0d1b2a;
        --text-secondary: #445469;
        --shell-bg: rgba(255, 255, 255, 0.9);
        --shell-border: #e1e8f0;
        --shell-highlight: rgba(0, 0, 0, 0.04);
        --shadow: 0 24px 70px rgba(0, 0, 0, 0.08);
        --code-bg: #f5f7fb;
        --code-border: #d9e3f0;
        --code-text: #0d1b2a;
        --code-accent: #1f6feb;
        color-scheme: light;
      }
      :root[data-resolved-theme="dark"] {
        --body-bg: #050f1d;
        --text-primary: #e8edf2;
        --text-secondary: #b4c0d0;
        --shell-bg: rgba(12, 27, 48, 0.75);
        --shell-border: rgba(255, 255, 255, 0.08);
        --shell-highlight: rgba(255, 255, 255, 0.06);
        --shadow: 0 24px 70px rgba(0, 0, 0, 0.45);
        --code-bg: #0b1728;
        --code-border: #1c2b3c;
        --code-text: #e8edf2;
        --code-accent: #7cc2ff;
        color-scheme: dark;
      }
      @media (prefers-color-scheme: dark) {
        :root[data-theme="system"] {
          --body-bg: #050f1d;
          --text-primary: #e8edf2;
          --text-secondary: #b4c0d0;
          --shell-bg: rgba(12, 27, 48, 0.75);
          --shell-border: rgba(255, 255, 255, 0.08);
          --shell-highlight: rgba(255, 255, 255, 0.06);
          --shadow: 0 24px 70px rgba(0, 0, 0, 0.45);
          color-scheme: dark;
        }
      }
      body {
        margin: 0;
        font-family: "Helvetica Neue", Arial, sans-serif;
        background: var(--body-bg);
        color: var(--text-primary);
        min-height: 100vh;
        position: relative;
        transition: background 0.2s ease, color 0.2s ease;
      }
      .page {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 18px;
      }
      .example {
        width: 100vw;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .example + .example {
        margin-top: 12px;
      }
      h1 {
        margin: 0;
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        font-size: 34px;
        letter-spacing: 0.05em;
      }
      .page-header {
        padding: 14px 20px;
      }
      .subtitle {
        margin: 6px 0 18px;
        font-size: 16px;
        color: var(--text-secondary);
      }
      p {
        margin: 0 0 24px;
        color: var(--text-secondary);
      }
      pre.code-block {
        margin: 12px 0 24px;
        padding: 14px 16px;
        background: var(--code-bg);
        border: 1px solid var(--code-border);
        border-radius: 12px;
        color: var(--code-text);
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        font-size: 13px;
        line-height: 1.5;
        overflow-x: auto;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.07);
        width: 100%;
      }
      pre.code-block code {
        color: inherit;
        white-space: pre;
      }
      .code-tag {
        color: var(--code-accent);
      }
      .code-attr {
        color: #d97706;
      }
      :root[data-resolved-theme="dark"] .code-attr {
        color: #fbbf24;
      }
      .code-value {
        color: #047857;
      }
      :root[data-resolved-theme="dark"] .code-value {
        color: #34d399;
      }
      earth-wedge {
        display: block;
        width: 100%;
        aspect-ratio: 16 / 9;
        border-radius: 12px;
        overflow: hidden;
      }
      earth-wedge + earth-wedge {
        margin-top: 12px;
      }
      .theme-toggle {
        position: fixed;
        top: 16px;
        right: 16px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px;
        background: var(--shell-bg);
        border: 1px solid var(--shell-border);
        border-radius: 10px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        z-index: 2;
      }
      .theme-toggle button {
        border: none;
        background: transparent;
        color: var(--text-secondary);
        padding: 8px 10px;
        border-radius: 8px;
        font-weight: 600;
        letter-spacing: 0.01em;
        cursor: pointer;
        transition: background 0.15s ease, color 0.15s ease;
      }
      .theme-toggle button:hover {
        color: var(--text-primary);
        background: rgba(0, 0, 0, 0.04);
      }
      :root[data-resolved-theme="dark"] .theme-toggle button:hover {
        background: rgba(255, 255, 255, 0.06);
      }
      .theme-toggle button.active {
        color: var(--text-primary);
        background: rgba(0, 0, 0, 0.08);
      }
      :root[data-resolved-theme="dark"] .theme-toggle button.active {
        background: rgba(255, 255, 255, 0.1);
      }
      @media (min-width: 700px) {
        .page {
          gap: 24px;
        }
        .example {
          flex-direction: row-reverse;
          align-items: center;
          gap: 16px;
        }
        .example pre.code-block {
          flex: 0 0 360px;
        }
        .example earth-wedge {
          flex: 1 1 auto;
          width: auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="theme-toggle" data-theme-toggle>
      <button type="button" data-theme="light">Light</button>
      <button type="button" data-theme="system" class="active">System</button>
      <button type="button" data-theme="dark">Dark</button>
    </div>
    <div class="page">
      <div class="page-header">
        <h1>&lt;earth-wedge&gt;</h1>
        <p class="subtitle">Render any building on the web.</p>
      </div>
      <div class="example">
        <pre class="code-block"><code><span class="code-tag">&lt;earth-wedge</span>
  <span class="code-attr">outline</span>=<span class="code-value">'[
    {"lat": 48.8589, "lon": 2.2936},
    {"lat": 48.8592, "lon": 2.2951},
    {"lat": 48.8586, "lon": 2.2960},
    {"lat": 48.8579, "lon": 2.2957},
    {"lat": 48.8577, "lon": 2.2943},
    {"lat": 48.8583, "lon": 2.2934}
  ]'</span><span class="code-tag"><br />/&gt;</span></code></pre>
  <earth-wedge outline='[
                        {"lat": 48.8589, "lon": 2.2936},
                        {"lat": 48.8592, "lon": 2.2951},
                        {"lat": 48.8586, "lon": 2.2960},
                        {"lat": 48.8579, "lon": 2.2957},
                        {"lat": 48.8577, "lon": 2.2943},
                        {"lat": 48.8583, "lon": 2.2934}
          ]'
        />
        </div>
        <div class="example">
          <pre class="code-block"><code><span class="code-tag">&lt;earth-wedge</span>
  <span class="code-attr">way</span>=<span class="code-value">"32965412"</span>
<span class="code-tag">/&gt;</span></code></pre>
<earth-wedge way="32965412" />
      </div>
    </div>

    <script type="module">
      import './index.ts';

      const root = document.documentElement;
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
      const toggleButtons = document.querySelectorAll('[data-theme-toggle] button');
      const storedTheme = localStorage.getItem('ew-theme') || 'system';

      const resolveTheme = (choice) =>
        choice === 'system' ? (prefersDark.matches ? 'dark' : 'light') : choice;

      const applyResolvedTheme = (choice) => {
        const resolved = resolveTheme(choice);
        root.setAttribute('data-resolved-theme', resolved);
      };

      const setTheme = (choice) => {
        root.setAttribute('data-theme', choice);
        localStorage.setItem('ew-theme', choice);
        toggleButtons.forEach((btn) => btn.classList.toggle('active', btn.dataset.theme === choice));
        applyResolvedTheme(choice);
      };

      setTheme(storedTheme);

      prefersDark.addEventListener('change', () => {
        if (root.getAttribute('data-theme') === 'system') {
          applyResolvedTheme('system');
        }
      });

      toggleButtons.forEach((btn) =>
        btn.addEventListener('click', () => setTheme(btn.dataset.theme))
      );
    </script>
  </body>
</html>
